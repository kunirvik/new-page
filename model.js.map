{"version":3,"file":"model.js","sources":["../src/js/model.js"],"sourcesContent":["\n\"use strict\";\nimport * as THREE from 'three';\n\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js';\nimport * as basicLightbox from 'basiclightbox';\nimport  'basiclightbox/dist/basicLightbox.min.css';\nimport {closeModal} from './closeModal';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js';\n\n\nclass Menu {\n  constructor() {\n    this._menu = document.querySelector('.js-menu');\n    if (!this._menu) return;\n\n    this._menuContents = this._menu.querySelector('.js-menu-contents');\n    this._menuToggleButton = this._menu.querySelector('.js-menu-toggle');\n    this._menuTitle = this._menu.querySelector('.js-menu-title');\n\n    this._expanded = true;\n    this._animate = false;\n    this._collapsed = null;\n\n    this.expand = this.expand.bind(this);\n    this.collapse = this.collapse.bind(this);\n    this.toggle = this.toggle.bind(this);\n\n    this._initialize();\n  }\n\n  _initialize() {\n    document.addEventListener('DOMContentLoaded', () => {\n      this._calculateScales();\n      this._createEaseAnimations();\n      this._addEventListeners();\n\n      this.collapse();\n      this.activate();\n    });\n  }\n\n  activate() {\n    this._menu.classList.add('menu--active');\n    this._animate = true;\n  }\n\n  collapse() {\n    if (!this._expanded) {\n      return;\n    }\n    this._expanded = false;\n\n    const { x, y } = this._collapsed;\n    const invX = 1 / x;\n    const invY = 1 / y;\n\n    this._menu.style.transform = `scale(${x}, ${y})`;\n    this._menuContents.style.transform = `scale(${invX}, ${invY})`;\n\n    if (!this._animate) {\n      return;\n    }\n\n    this._applyAnimation({ expand: false });\n  }\n\n  expand() {\n    if (this._expanded) {\n      return;\n    }\n    this._expanded = true;\n\n    this._menu.style.transform = `scale(1, 1)`;\n    this._menuContents.style.transform = `scale(1, 1)`;\n\n    if (!this._animate) {\n      return;\n    }\n\n    this._applyAnimation({ expand: true });\n  }\n\n  toggle() {\n    if (this._expanded) {\n      this.collapse();\n    } else {\n      this.expand();\n    }\n  }\n\n  _addEventListeners() {\n    this._menuToggleButton.addEventListener('click', this.toggle);\n  }\n\n  _applyAnimation({ expand }) {\n    this._menu.classList.remove('menu--expanded', 'menu--collapsed');\n    this._menuContents.classList.remove('menu__contents--expanded', 'menu__contents--collapsed');\n\n    // Force a recalc styles here so the classes take hold.\n    window.getComputedStyle(this._menu).transform;\n\n    if (expand) {\n      this._menu.classList.add('menu--expanded');\n      this._menuContents.classList.add('menu__contents--expanded');\n    } else {\n      this._menu.classList.add('menu--collapsed');\n      this._menuContents.classList.add('menu__contents--collapsed');\n    }\n  }\n\n  _calculateScales() {\n    const collapsed = this._menuTitle.getBoundingClientRect();\n    const expanded = this._menu.getBoundingClientRect();\n\n    this._collapsed = {\n      x: collapsed.width / expanded.width,\n      y: collapsed.height / expanded.height\n    };\n  }\n\n  _createEaseAnimations() {\n    let menuEase = document.querySelector('.menu-ease');\n    if (menuEase) {\n      return menuEase;\n    }\n\n    menuEase = document.createElement('style');\n    menuEase.classList.add('menu-ease');\n\n    const menuExpandAnimation = [];\n    const menuExpandContentsAnimation = [];\n    const menuCollapseAnimation = [];\n    const menuCollapseContentsAnimation = [];\n    for (let i = 0; i <= 100; i++) {\n      const step = this._ease(i / 100);\n\n      this._append({\n        i,\n        step,\n        startX: this._collapsed.x,\n        startY: this._collapsed.y,\n        endX: 1,\n        endY: 1,\n        outerAnimation: menuExpandAnimation,\n        innerAnimation: menuExpandContentsAnimation\n      });\n\n      this._append({\n        i,\n        step,\n        startX: 1,\n        startY: 1,\n        endX: this._collapsed.x,\n        endY: this._collapsed.y,\n        outerAnimation: menuCollapseAnimation,\n        innerAnimation: menuCollapseContentsAnimation\n      });\n    }\n\n    menuEase.textContent = `\n      @keyframes menuExpandAnimation {\n        ${menuExpandAnimation.join('')}\n      }\n\n      @keyframes menuExpandContentsAnimation {\n        ${menuExpandContentsAnimation.join('')}\n      }\n\n      @keyframes menuCollapseAnimation {\n        ${menuCollapseAnimation.join('')}\n      }\n\n      @keyframes menuCollapseContentsAnimation {\n        ${menuCollapseContentsAnimation.join('')}\n      }`;\n\n    document.head.appendChild(menuEase);\n    return menuEase;\n  }\n\n  _append({\n    i,\n    step,\n    startX,\n    startY,\n    endX,\n    endY,\n    outerAnimation,\n    innerAnimation\n  }) {\n    const xScale = startX + (endX - startX) * step;\n    const yScale = startY + (endY - startY) * step;\n\n    const invScaleX = 1 / xScale;\n    const invScaleY = 1 / yScale;\n\n    outerAnimation.push(`\n      ${i}% {\n        transform: scale(${xScale}, ${yScale});\n      }`);\n\n    innerAnimation.push(`\n      ${i}% {\n        transform: scale(${invScaleX}, ${invScaleY});\n      }`);\n  }\n\n  _clamp(value, min, max) {\n    return Math.max(min, Math.min(max, value));\n  }\n\n  _ease(v, pow = 4) {\n    v = this._clamp(v, 0, 1);\n\n    return 1 - Math.pow(1 - v, pow);\n  }\n}\n\nnew Menu();\n\n\n\nlet sceneManagers = [];\n\nclass SceneManager {\n  constructor(canvasId, modelPath, cameraSettings, modelPosition, materialSettings, textureSettings) {\n    console.log(`Инициализация SceneManager для canvasId: ${canvasId} и modelPath: ${modelPath}`);\n    this.canvas = document.querySelector(canvasId);\n    if (!this.canvas) {\n      console.error(`Canvas с ID ${canvasId} не найден`);\n      return;\n    }\n    this.renderer = new THREE.WebGLRenderer({ canvas: this.canvas, antialias: true, alpha: true });\n    this.renderer.setPixelRatio(window.devicePixelRatio);\n    this.renderer.setSize(this.canvas.clientWidth, this.canvas.clientHeight);\n    console.log('Renderer успешно инициализирован');\n\n    this.camera = new THREE.PerspectiveCamera(\n      cameraSettings.fov || 50,\n      this.canvas.clientWidth / this.canvas.clientHeight,\n      cameraSettings.near || 0.1,\n      cameraSettings.far || 600\n    );\n    this.camera.position.set(\n      cameraSettings.position.x || 10,\n      cameraSettings.position.y || 10,\n      cameraSettings.position.z || 40\n    );\n    console.log('Камера успешно инициализирована');\n\n    this.scene = new THREE.Scene();\n    console.log('Сцена успешно инициализирована');\n\n    this.addLights();\n\n    this.isMouseOver = false;\n    this.continueRotationUntil = 0;\n    this.rotationDuration = 1000; // Продолжительность вращения после ухода курсора (1 секунда)\n\n    this.canvas.addEventListener('mousemove', (event) => this.onMouseMove(event));\n    this.canvas.addEventListener('mouseleave', () => this.onMouseLeave());\n    this.canvas.addEventListener('mouseenter', () => this.onMouseEnter());\n\n    window.addEventListener('resize', () => this.onWindowResize(), false);\n\n    // Инициализируем IntersectionObserver для ленивой загрузки модели\n    this.intersectionObserver = new IntersectionObserver((entries) => {\n      entries.forEach(entry => {\n        if (entry.isIntersecting) {\n          this.loadModel(modelPath, modelPosition, materialSettings, textureSettings); // Загружаем модель, когда canvas попадает в область видимости\n          this.intersectionObserver.unobserve(this.canvas); // Прекращаем наблюдение после загрузки\n        }\n      });\n    }, {\n      root: null,\n      rootMargin: '0px',\n      threshold: 0.1\n    });\n\n    this.intersectionObserver.observe(this.canvas);\n    sceneManagers.push(this);\n  }\n\n  addLights() {\n    console.log('Добавляем освещение');\n    const skyColor = 0x4779F4;\n    const groundColor = 0x9E9E9E;\n    const intensity = 5;\n    const hemisphereLight = new THREE.HemisphereLight(skyColor, groundColor, intensity);\n    this.scene.add(hemisphereLight);\n\n    const color = 0xFF0000;\n    const directionalLight = new THREE.DirectionalLight(color, intensity);\n    directionalLight.position.set(0, 10, 0);\n    directionalLight.target.position.set(-5, 0, 0);\n    this.scene.add(directionalLight);\n    this.scene.add(directionalLight.target);\n    console.log('Освещение добавлено');\n  }\n\n  loadModel(modelPath, modelPosition, materialSettings, textureSettings) {\n    if (!modelPath) {\n      console.error('Путь к модели не указан');\n      return;\n    }\n\n    console.log(`Пытаемся загрузить модель из ${modelPath}`);\n    const gltfLoader = new GLTFLoader();\n    gltfLoader.load(modelPath, (gltf) => {\n      console.log('Объект успешно загружен');\n\n      this.modelGroup = new THREE.Group();\n      this.scene.add(this.modelGroup);\n\n      this.model = gltf.scene;\n\n      const boundingBox = new THREE.Box3().setFromObject(this.model);\n      const center = boundingBox.getCenter(new THREE.Vector3());\n      this.model.position.sub(center);\n\n      this.modelGroup.add(this.model);\n\n      this.modelGroup.position.set(\n        modelPosition.x || center.x,\n        modelPosition.y || center.y,\n        modelPosition.z || center.z\n      );\n\n      console.log('Добавляем объект в сцену');\n\n      if (materialSettings) {\n        this.applyMaterialSettings(this.model, materialSettings, textureSettings);\n      }\n\n      this.initialRotation = this.modelGroup.rotation.clone();\n\n    }, undefined, (error) => {\n      console.error(`Произошла ошибка при загрузке ${modelPath}`, error);\n    });\n  }\n\n  applyMaterialSettings(model, materialSettings, textureSettings) {\n    model.traverse((child) => {\n      if (child.isMesh) {\n        const materialParams = {\n          color: materialSettings.color || 0xffffff,\n          metalness: materialSettings.metalness || 0,\n          roughness: materialSettings.roughness || 0,\n          transmission: materialSettings.transmission || 1,\n          opacity: materialSettings.opacity || 0.5,\n          transparent: true,\n          thickness: materialSettings.thickness || 0.1,\n          envMap: materialSettings.envMap || null,\n          ior: materialSettings.ior || 1.5,\n        };\n\n        if (textureSettings) {\n          if (textureSettings.map) materialParams.map = this.loadTexture(textureSettings.map);\n          if (textureSettings.metalnessMap) materialParams.metalnessMap = this.loadTexture(textureSettings.metalnessMap);\n          if (textureSettings.roughnessMap) materialParams.roughnessMap = this.loadTexture(textureSettings.roughnessMap);\n          if (textureSettings.normalMap) materialParams.normalMap = this.loadTexture(textureSettings.normalMap);\n          if (textureSettings.alphaMap) materialParams.alphaMap = this.loadTexture(textureSettings.alphaMap);\n          if (textureSettings.envMap) materialParams.envMap = this.loadTexture(textureSettings.envMap);\n        }\n\n        child.material = new THREE.MeshPhysicalMaterial(materialParams);\n      }\n    });\n  }\n\n  loadTexture(path) {\n    const textureLoader = new THREE.TextureLoader();\n    return textureLoader.load(path);\n  }\n\n  onMouseMove(event) {\n    const canvasRect = this.canvas.getBoundingClientRect();\n    const canvasX = event.clientX - canvasRect.left;\n    const canvasY = event.clientY - canvasRect.top;\n\n    const normalizedX = (canvasX / this.canvas.clientWidth) * 2 - 1;\n    const normalizedY = -(canvasY / this.canvas.clientHeight) * 2 + 1;\n\n    const raycaster = new THREE.Raycaster();\n    raycaster.setFromCamera({ x: normalizedX, y: normalizedY }, this.camera);\n\n    if (this.modelGroup) {\n      const intersects = raycaster.intersectObject(this.modelGroup, true);\n      this.isMouseOver = intersects.length > 0;\n\n      if (this.isMouseOver) {\n        this.continueRotationUntil = Date.now() + this.rotationDuration;\n      }\n    }\n  }\n\n  onMouseLeave() {\n    this.isMouseOver = false;\n  }\n\n  onMouseEnter() {\n    this.isMouseOver = true;\n  }\n\n  onWindowResize() {\n    const canvas = this.renderer.domElement;\n    const width = canvas.clientWidth;\n    const height = canvas.clientHeight;\n    if (canvas.width !== width || canvas.height !== height) {\n      this.renderer.setSize(width, height, false);\n      this.camera.aspect = width / height;\n      this.camera.updateProjectionMatrix();\n    }\n  }\n\n  render() {\n    const delta = 0.05; // скорость интерполяции\n\n    if (this.canvas.id === 'c4') {\n      this.specialRenderForC4(delta);\n    } else if (this.canvas.id === 'c5') {\n      this.specialRenderForC5(delta);\n    } else {\n      this.defaultRender(delta);\n    }\n\n    this.onWindowResize();\n    this.renderer.render(this.scene, this.camera);\n  }\n\n  defaultRender(delta) {\n    if (this.isMouseOver && this.modelGroup) {\n      this.modelGroup.rotation.y += -0.01;\n    } else if (this.modelGroup) {\n      if (Date.now() < this.continueRotationUntil) {\n        this.modelGroup.rotation.y += -0.01;\n      } else {\n        const currentRotationY = this.modelGroup.rotation.y % (2 * Math.PI);\n        const initialRotationY = this.initialRotation.y % (2 * Math.PI);\n        const difference = currentRotationY - initialRotationY;\n\n        if (Math.abs(difference) > Math.PI) {\n          if (difference > 0) {\n            this.modelGroup.rotation.y = THREE.MathUtils.lerp(currentRotationY, initialRotationY + 2 * Math.PI, delta);\n          } else {\n            this.modelGroup.rotation.y = THREE.MathUtils.lerp(currentRotationY, initialRotationY - 2 * Math.PI, delta);\n          }\n        } else {\n          this.modelGroup.rotation.y = THREE.MathUtils.lerp(currentRotationY, initialRotationY, delta);\n        }\n      }\n    }\n  }\n\n  specialRenderForC5(delta) {\n\n    if (!this.controls) {\n      this.controls = new OrbitControls(this.camera, this.renderer.domElement);\n      this.controls.enableDamping = true;\n      this.controls.dampingFactor = 0.25;\n      this.controls.enableZoom = true;\n      \n    }\n    this.controls.target.set(10, 0, 0);\n    this.controls.update();\n  }\n\n  specialRenderForC4(delta) {\n    const maxRotation = THREE.MathUtils.degToRad(20); // 20 градусов в радианах\n    const speed = 0.01; // Скорость вращения\n\n    if (this.isMouseOver && this.modelGroup) {\n      const time = Date.now() * speed; // Используем время для вычисления угла\n      this.modelGroup.rotation.x = maxRotation * Math.sin(time); // Вращаем между -20 и 20 градусами\n    } else if (this.modelGroup) {\n      if (Date.now() < this.continueRotationUntil) {\n        const time = Date.now() * speed; // Используем время для вычисления угла\n        this.modelGroup.rotation.x = maxRotation * Math.sin(time); // Вращаем между -20 и 20 градусами\n      } else {\n        const currentRotationX = this.modelGroup.rotation.x % (2 * Math.PI);\n        const initialRotationX = this.initialRotation.x % (2 * Math.PI);\n        const difference = currentRotationX - initialRotationX;\n\n        if (Math.abs(difference) > Math.PI) {\n          if (difference > 0) {\n            this.modelGroup.rotation.x = THREE.MathUtils.lerp(currentRotationX, initialRotationX + 2 * Math.PI, delta);\n          } else {\n            this.modelGroup.rotation.x = THREE.MathUtils.lerp(currentRotationX, initialRotationX - 2 * Math.PI, delta);\n          }\n        } else {\n          this.modelGroup.rotation.x = THREE.MathUtils.lerp(currentRotationX, initialRotationX, delta);\n        }\n      }\n    }\n  }\n}\n\nfunction animate() {\n  sceneManagers.forEach(manager => manager.render());\n  requestAnimationFrame(animate);\n}\n\nfunction main() {\n  console.log('Запуск main функции');\n  new SceneManager(\n    '#c1',\n    './models/mini.glb',\n    {\n      fov: 0,\n      near: 0.1,\n      far: 500,\n      position: { x: 0, y: 5, z: 20 }\n    },\n    { x: 10, y: 0, z: 0 },\n    {\n      color: 0xffffff,\n      metalness: 0.9,\n      roughness: 0.8,\n      transmission: 0.9,\n      opacity: 0.5,\n      thickness: 0.1,\n      ior: 1.5,\n      transparent: true,\n      clearColor: 0x00000, // Черный цвет фона\n      clearAlpha: 0, // Устанавливаем прозрачность фона\n      alpha: true\n    }\n  );\n  new SceneManager(\n    '#c2',\n    './models/mini.glb',\n    {\n      fov: 0,\n      near: 0.1,\n      far: 500,\n      position: { x: 0, y: 5, z: 20 }\n    },\n    { x: 10, y: 0, z: 0 },\n    null,\n    {}\n  );\n  new SceneManager(\n    '#c3',\n    '../models/mini.glb',\n    {\n      fov: 0,\n      near: 0.1,\n      far: 500,\n      position: { x: 0, y: 5, z: 20 }\n    },\n    { x: 10, y: 0, z: 0 }\n  );\n  new SceneManager(\n    '#c4',\n    './models/logo.glb',\n    {\n      fov: 0,\n      near: 0.1,\n      far: 500,\n      position: { x: 0, y: 50, z: 200 }\n    },\n    { x: 0, y: 0, z: 50 },\n    {\n      color: 0xffffff,\n      metalness: 0.8,\n      roughness: 0.9,\n      transmission: 0.5,\n      opacity: 0.7,\n      thickness: 0.1,\n      ior: 1.5,\n      transparent: true,\n      // clearColor: 0x000000, // Черный цвет фона\n      // clearAlpha: 0, // Устанавливаем прозрачность фона\n      alpha: true\n    },\n    {\n      map: '../models/park.png',\n      // metalnessMap: 'path/to/metalness.jpg',\n      // roughnessMap: 'path/to/roughness.jpg',\n      // normalMap: 'path/to/normal.jpg',\n      // alphaMap: 'path/to/alpha.jpg',\n      // envMap: 'path/to/env.jpg'\n    }\n  );\n\n  animate();\n}\n\nmain();\n\n\nconst modalModel = document.querySelector('.model1');\nmodalModel.addEventListener( 'click', clickModel );\n\nfunction clickModel(evt){\n  evt.preventDefault();\n\tif(evt.target.classList.contains('model1')){\n\t\tconsole.log('Navigating');\n\t  createModalModel()\n\t  }\n\n}\nfunction createModalModel(){\n  \n  {const instance = basicLightbox.create(`\n   \n    <div class=\"modal\">\n \n    <div class=\"modal-container\">\n\n    <div class=\"wrapper-canvas\"><canvas class=\"model5\" id=\"c5\"><canvas></div>\n\n    <div class=\"wrapper-info\">\n    <button class=\"close-button\">X</button>\n    <h1>Наши контакты</h1>\n\n    <div class=\"contact-info\">\n        <p><strong>Адрес:</strong> 123 улица, Город, Страна, Почтовый индекс</p>\n        <p><strong>Телефон: +380961383642</strong> <span class=\"phone\">+7 (123) 456-7890</span></p>\n        <p><strong>Email:</strong> <a href=\"mailto:info@example.com\" class=\"email\">info@example.com</a></p>\n    </div>\n    </div>\n\n   </div>\n   </div>\n   `,{\n       handler:null,\n       onShow() {\n     this.handler = closeModal.bind(instance);\n        \n       document.addEventListener('keydown', this.handler);\n       document.addEventListener('click', this.handler);\n       setTimeout(() => {\n        new SceneManager('#c5', './models/mini.glb', {\n          fov: 0,\n          near: 0.1,\n          far: 500,\n          position: { x: 0, y: 0, z: 0 }\n        },\n        { x: 0, y: 0, z: 0 },\n        {\n          color: 0xffffff,\n          metalness: 0.9,\n          roughness: 0.8,\n          transmission: 0.9,\n          opacity: 0.5,\n          thickness: 0.1,\n          ior: 1.5,\n          transparent: true,\n          clearColor: 0x00000, // Черный цвет фона\n          clearAlpha: 0, // Устанавливаем прозрачность фона\n          alpha: true\n        }, null, null);\n      }, 0); \n\n   },\n   onClose(){\n       document.removeEventListener('keydown', this.handler);\n       document.removeEventListener('click', this.handler)\n   }\n   });\n   instance.show()\n   \n\n  \n\n}\n\n\n  \n}\n\n\nconst typeWriterTexts = [\n  { elementId: 'heroText', text: 'Hello, welcome to my website!' },\n  { elementId: 'projectsText', text: 'Here are some of my projects.' },\n  { elementId: 'contactsText', text: 'Feel free to contact me!' }\n];\n\nfunction typeWriter(element, text, speed, callback) {\n  let i = 0;\n  function typing() {\n    if (i < text.length) {\n      element.innerHTML += text.charAt(i);\n      i++;\n      setTimeout(typing, speed);\n    } else if (callback) {\n      callback();\n    }\n  }\n  typing();\n}\n\ntypeWriterTexts.forEach((item) => {\n  const element = document.getElementById(item.elementId);\n  if (element) {\n    typeWriter(element, item.text, 50);\n  }\n});\n\n\n\n\n"],"names":["Menu","x","y","invX","invY","expand","collapsed","expanded","menuEase","menuExpandAnimation","menuExpandContentsAnimation","menuCollapseAnimation","menuCollapseContentsAnimation","step","i","startX","startY","endX","endY","outerAnimation","innerAnimation","xScale","yScale","invScaleX","invScaleY","value","min","max","v","pow","sceneManagers","SceneManager","canvasId","modelPath","cameraSettings","modelPosition","materialSettings","textureSettings","THREE.WebGLRenderer","THREE.PerspectiveCamera","THREE.Scene","event","entries","entry","skyColor","groundColor","intensity","hemisphereLight","THREE.HemisphereLight","color","directionalLight","THREE.DirectionalLight","GLTFLoader","gltf","THREE.Group","center","THREE.Box3","THREE.Vector3","error","model","child","materialParams","THREE.MeshPhysicalMaterial","path","THREE.TextureLoader","canvasRect","canvasX","canvasY","normalizedX","normalizedY","raycaster","THREE.Raycaster","intersects","canvas","width","height","delta","currentRotationY","initialRotationY","difference","THREE.MathUtils","OrbitControls","maxRotation","speed","time","currentRotationX","initialRotationX","animate","manager","main","modalModel","clickModel","evt","createModalModel","instance","basicLightbox.create","closeModal","typeWriterTexts","typeWriter","element","text","callback","typing","item"],"mappings":"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"}