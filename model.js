import"./assets/modulepreload-polyfill-3cfb730f.js";/* empty css                     */import{b as x,W as M,P as g,c as _,H as y,D as w,G as L,d as C,B as E,V as b,M as R,T as G,R as z,e as c,O as T}from"./assets/vendor-0fd547fe.js";import{c as A}from"./assets/closeModal-ec5d980a.js";class ${constructor(){this._menu=document.querySelector(".js-menu"),this._menu&&(this._menuContents=this._menu.querySelector(".js-menu-contents"),this._menuToggleButton=this._menu.querySelector(".js-menu-toggle"),this._menuTitle=this._menu.querySelector(".js-menu-title"),this._expanded=!0,this._animate=!1,this._collapsed=null,this.expand=this.expand.bind(this),this.collapse=this.collapse.bind(this),this.toggle=this.toggle.bind(this),this._initialize())}_initialize(){document.addEventListener("DOMContentLoaded",()=>{this._calculateScales(),this._createEaseAnimations(),this._addEventListeners(),this.collapse(),this.activate()})}activate(){this._menu.classList.add("menu--active"),this._animate=!0}collapse(){if(!this._expanded)return;this._expanded=!1;const{x:e,y:n}=this._collapsed,t=1/e,s=1/n;this._menu.style.transform=`scale(${e}, ${n})`,this._menuContents.style.transform=`scale(${t}, ${s})`,this._animate&&this._applyAnimation({expand:!1})}expand(){this._expanded||(this._expanded=!0,this._menu.style.transform="scale(1, 1)",this._menuContents.style.transform="scale(1, 1)",this._animate&&this._applyAnimation({expand:!0}))}toggle(){this._expanded?this.collapse():this.expand()}_addEventListeners(){this._menuToggleButton.addEventListener("click",this.toggle)}_applyAnimation({expand:e}){this._menu.classList.remove("menu--expanded","menu--collapsed"),this._menuContents.classList.remove("menu__contents--expanded","menu__contents--collapsed"),window.getComputedStyle(this._menu).transform,e?(this._menu.classList.add("menu--expanded"),this._menuContents.classList.add("menu__contents--expanded")):(this._menu.classList.add("menu--collapsed"),this._menuContents.classList.add("menu__contents--collapsed"))}_calculateScales(){const e=this._menuTitle.getBoundingClientRect(),n=this._menu.getBoundingClientRect();this._collapsed={x:e.width/n.width,y:e.height/n.height}}_createEaseAnimations(){let e=document.querySelector(".menu-ease");if(e)return e;e=document.createElement("style"),e.classList.add("menu-ease");const n=[],t=[],s=[],o=[];for(let i=0;i<=100;i++){const r=this._ease(i/100);this._append({i,step:r,startX:this._collapsed.x,startY:this._collapsed.y,endX:1,endY:1,outerAnimation:n,innerAnimation:t}),this._append({i,step:r,startX:1,startY:1,endX:this._collapsed.x,endY:this._collapsed.y,outerAnimation:s,innerAnimation:o})}return e.textContent=`
      @keyframes menuExpandAnimation {
        ${n.join("")}
      }

      @keyframes menuExpandContentsAnimation {
        ${t.join("")}
      }

      @keyframes menuCollapseAnimation {
        ${s.join("")}
      }

      @keyframes menuCollapseContentsAnimation {
        ${o.join("")}
      }`,document.head.appendChild(e),e}_append({i:e,step:n,startX:t,startY:s,endX:o,endY:i,outerAnimation:r,innerAnimation:l}){const d=t+(o-t)*n,m=s+(i-s)*n,f=1/d,v=1/m;r.push(`
      ${e}% {
        transform: scale(${d}, ${m});
      }`),l.push(`
      ${e}% {
        transform: scale(${f}, ${v});
      }`)}_clamp(e,n,t){return Math.max(n,Math.min(t,e))}_ease(e,n=4){return e=this._clamp(e,0,1),1-Math.pow(1-e,n)}}new $;let u=[];class h{constructor(e,n,t,s,o,i){if(console.log(`Инициализация SceneManager для canvasId: ${e} и modelPath: ${n}`),this.canvas=document.querySelector(e),!this.canvas){console.error(`Canvas с ID ${e} не найден`);return}this.renderer=new M({canvas:this.canvas,antialias:!0,alpha:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.canvas.clientWidth,this.canvas.clientHeight),console.log("Renderer успешно инициализирован"),this.camera=new g(t.fov||50,this.canvas.clientWidth/this.canvas.clientHeight,t.near||.1,t.far||600),this.camera.position.set(t.position.x||10,t.position.y||10,t.position.z||40),console.log("Камера успешно инициализирована"),this.scene=new _,console.log("Сцена успешно инициализирована"),this.addLights(),this.isMouseOver=!1,this.continueRotationUntil=0,this.rotationDuration=1e3,this.canvas.addEventListener("mousemove",r=>this.onMouseMove(r)),this.canvas.addEventListener("mouseleave",()=>this.onMouseLeave()),this.canvas.addEventListener("mouseenter",()=>this.onMouseEnter()),window.addEventListener("resize",()=>this.onWindowResize(),!1),this.intersectionObserver=new IntersectionObserver(r=>{r.forEach(l=>{l.isIntersecting&&(this.loadModel(n,s,o,i),this.intersectionObserver.unobserve(this.canvas))})},{root:null,rootMargin:"0px",threshold:.1}),this.intersectionObserver.observe(this.canvas),u.push(this)}addLights(){console.log("Добавляем освещение");const e=4684276,n=10395294,t=5,s=new y(e,n,t);this.scene.add(s);const o=16711680,i=new w(o,t);i.position.set(0,10,0),i.target.position.set(-5,0,0),this.scene.add(i),this.scene.add(i.target),console.log("Освещение добавлено")}loadModel(e,n,t,s){if(!e){console.error("Путь к модели не указан");return}console.log(`Пытаемся загрузить модель из ${e}`),new L().load(e,i=>{console.log("Объект успешно загружен"),this.modelGroup=new C,this.scene.add(this.modelGroup),this.model=i.scene;const l=new E().setFromObject(this.model).getCenter(new b);this.model.position.sub(l),this.modelGroup.add(this.model),this.modelGroup.position.set(n.x||l.x,n.y||l.y,n.z||l.z),console.log("Добавляем объект в сцену"),t&&this.applyMaterialSettings(this.model,t,s),this.initialRotation=this.modelGroup.rotation.clone()},void 0,i=>{console.error(`Произошла ошибка при загрузке ${e}`,i)})}applyMaterialSettings(e,n,t){e.traverse(s=>{if(s.isMesh){const o={color:n.color||16777215,metalness:n.metalness||0,roughness:n.roughness||0,transmission:n.transmission||1,opacity:n.opacity||.5,transparent:!0,thickness:n.thickness||.1,envMap:n.envMap||null,ior:n.ior||1.5};t&&(t.map&&(o.map=this.loadTexture(t.map)),t.metalnessMap&&(o.metalnessMap=this.loadTexture(t.metalnessMap)),t.roughnessMap&&(o.roughnessMap=this.loadTexture(t.roughnessMap)),t.normalMap&&(o.normalMap=this.loadTexture(t.normalMap)),t.alphaMap&&(o.alphaMap=this.loadTexture(t.alphaMap)),t.envMap&&(o.envMap=this.loadTexture(t.envMap))),s.material=new R(o)}})}loadTexture(e){return new G().load(e)}onMouseMove(e){const n=this.canvas.getBoundingClientRect(),t=e.clientX-n.left,s=e.clientY-n.top,o=t/this.canvas.clientWidth*2-1,i=-(s/this.canvas.clientHeight)*2+1,r=new z;if(r.setFromCamera({x:o,y:i},this.camera),this.modelGroup){const l=r.intersectObject(this.modelGroup,!0);this.isMouseOver=l.length>0,this.isMouseOver&&(this.continueRotationUntil=Date.now()+this.rotationDuration)}}onMouseLeave(){this.isMouseOver=!1}onMouseEnter(){this.isMouseOver=!0}onWindowResize(){const e=this.renderer.domElement,n=e.clientWidth,t=e.clientHeight;(e.width!==n||e.height!==t)&&(this.renderer.setSize(n,t,!1),this.camera.aspect=n/t,this.camera.updateProjectionMatrix())}render(){this.canvas.id==="c4"?this.specialRenderForC4(.05):this.canvas.id==="c5"?this.specialRenderForC5(.05):this.defaultRender(.05),this.onWindowResize(),this.renderer.render(this.scene,this.camera)}defaultRender(e){if(this.isMouseOver&&this.modelGroup)this.modelGroup.rotation.y+=-.01;else if(this.modelGroup)if(Date.now()<this.continueRotationUntil)this.modelGroup.rotation.y+=-.01;else{const n=this.modelGroup.rotation.y%(2*Math.PI),t=this.initialRotation.y%(2*Math.PI),s=n-t;Math.abs(s)>Math.PI?s>0?this.modelGroup.rotation.y=c.lerp(n,t+2*Math.PI,e):this.modelGroup.rotation.y=c.lerp(n,t-2*Math.PI,e):this.modelGroup.rotation.y=c.lerp(n,t,e)}}specialRenderForC5(e){this.controls||(this.controls=new T(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.dampingFactor=.25,this.controls.enableZoom=!0),this.controls.target.set(10,0,0),this.controls.update()}specialRenderForC4(e){const n=c.degToRad(20),t=.01;if(this.isMouseOver&&this.modelGroup){const s=Date.now()*t;this.modelGroup.rotation.x=n*Math.sin(s)}else if(this.modelGroup)if(Date.now()<this.continueRotationUntil){const s=Date.now()*t;this.modelGroup.rotation.x=n*Math.sin(s)}else{const s=this.modelGroup.rotation.x%(2*Math.PI),o=this.initialRotation.x%(2*Math.PI),i=s-o;Math.abs(i)>Math.PI?i>0?this.modelGroup.rotation.x=c.lerp(s,o+2*Math.PI,e):this.modelGroup.rotation.x=c.lerp(s,o-2*Math.PI,e):this.modelGroup.rotation.x=c.lerp(s,o,e)}}}function p(){u.forEach(a=>a.render()),requestAnimationFrame(p)}function k(){console.log("Запуск main функции"),new h("#c1","./models/mini.glb",{fov:0,near:.1,far:500,position:{x:0,y:5,z:20}},{x:10,y:0,z:0},{color:16777215,metalness:.9,roughness:.8,transmission:.9,opacity:.5,thickness:.1,ior:1.5,transparent:!0,clearColor:0,clearAlpha:0,alpha:!0}),new h("#c2","./models/mini.glb",{fov:0,near:.1,far:500,position:{x:0,y:5,z:20}},{x:10,y:0,z:0},null,{}),new h("#c3","../models/mini.glb",{fov:0,near:.1,far:500,position:{x:0,y:5,z:20}},{x:10,y:0,z:0}),new h("#c4","./models/logo.glb",{fov:0,near:.1,far:500,position:{x:0,y:50,z:200}},{x:0,y:0,z:50},{color:16777215,metalness:.8,roughness:.9,transmission:.5,opacity:.7,thickness:.1,ior:1.5,transparent:!0,alpha:!0},{map:"../models/park.png"}),p()}k();const I=document.querySelector(".model1");I.addEventListener("click",O);function O(a){a.preventDefault(),a.target.classList.contains("model1")&&(console.log("Navigating"),j())}function j(){{const a=x.create(`
   
    <div class="modal">
 
    <div class="modal-container">

    <div class="wrapper-canvas"><canvas class="model5" id="c5"><canvas></div>

    <div class="wrapper-info">
    <button class="close-button">X</button>
    <h1>Наши контакты</h1>

    <div class="contact-info">
        <p><strong>Адрес:</strong> 123 улица, Город, Страна, Почтовый индекс</p>
        <p><strong>Телефон: +380961383642</strong> <span class="phone">+7 (123) 456-7890</span></p>
        <p><strong>Email:</strong> <a href="mailto:info@example.com" class="email">info@example.com</a></p>
    </div>
    </div>

   </div>
   </div>
   `,{handler:null,onShow(){this.handler=A.bind(a),document.addEventListener("keydown",this.handler),document.addEventListener("click",this.handler),setTimeout(()=>{new h("#c5","./models/mini.glb",{fov:0,near:.1,far:500,position:{x:0,y:0,z:0}},{x:0,y:0,z:0},{color:16777215,metalness:.9,roughness:.8,transmission:.9,opacity:.5,thickness:.1,ior:1.5,transparent:!0,clearColor:0,clearAlpha:0,alpha:!0},null,null)},0)},onClose(){document.removeEventListener("keydown",this.handler),document.removeEventListener("click",this.handler)}});a.show()}}const D=[{elementId:"heroText",text:"Hello, welcome to my website!"},{elementId:"projectsText",text:"Here are some of my projects."},{elementId:"contactsText",text:"Feel free to contact me!"}];function F(a,e,n,t){let s=0;function o(){s<e.length?(a.innerHTML+=e.charAt(s),s++,setTimeout(o,n)):t&&t()}o()}D.forEach(a=>{const e=document.getElementById(a.elementId);e&&F(e,a.text,50)});
//# sourceMappingURL=model.js.map
